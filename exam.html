<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exam - Information Technology Proctor</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/style.css">
</head>
<body>
  <div class="carousel-bg">
    <div class="carousel-slide active" style="background-image: url('photo1.jpg');"></div>
    <div class="carousel-slide" style="background-image: url('photo2.jpg');"></div>
    <div class="carousel-slide" style="background-image: url('photo3.jpg');"></div>
  </div>
  <header class="header-bg">
    <h1>Exam In Progress</h1>
  </header>

  <main class="container py-4 exam-main">
    <div class="hud-pills">
      <span class="pill-custom" id="examProgress">Questions 0/0</span>
      <span class="pill-custom" id="skippedPill">Skipped 0</span>
      <span class="pill-custom" id="examTimer">Time: 00:00</span>
    </div>

  <!-- question rendering area (kept minimal - no per-question list) -->
  <div id="examQuiz" class="w-100">
      <!-- Questions are rendered here by scripts/exam.js -->
    </div>
    <!-- Reload prevention handled via the shared warning modal to centralize behavior warnings -->
  </main>

  <footer class="mt-auto">Proverbs 16:28 A fraudulent man sows strife: and a whisperer separates chief friends.</footer>
  
   <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Carousel Script -->
  <script>
    // Auto-rotate carousel background slides every 8 seconds
    let currentSlide = 0;
    const slides = document.querySelectorAll('.carousel-slide');
    
    function rotateCarousel() {
      slides.forEach((slide, index) => {
        slide.classList.remove('active');
      });
      currentSlide = (currentSlide + 1) % slides.length;
      slides[currentSlide].classList.add('active');
    }
    
    // Start carousel rotation when page loads
    setInterval(rotateCarousel, 6000);
  </script>

  <!-- Modals reused from index can be present but will be wired in exam.js -->
  <!-- Warning/Confirm/Duplicate/Error modals are present in index.html and available via bootstrap.Modal if both pages served on same origin. -->

  <!-- Warning Modal (for violations) -->
  <div class="modal fade" id="warningModal" tabindex="-1" aria-labelledby="warningModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content modal-content-custom">
        <div class="modal-header modal-header-custom">
          <h5 class="modal-title" id="warningModalLabel">
            <i class="bi bi-exclamation-triangle-fill text-warning me-2"></i>Warning
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center modal-body-custom">
          <div class="warn-text mb-3">⚠ Do not switch tabs or minimize the exam.</div>
          <p id="warningText">This is your first warning. Continuing will restore fullscreen.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-accent" id="continueBtn">Continue Exam</button>
          <button type="button" class="btn btn-secondary" id="exitBtn" data-bs-dismiss="modal">Exit Exam</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Confirm Modal (for answer submission) -->
  <div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content modal-content-custom">
        <div class="modal-header modal-header-custom">
          <h5 class="modal-title" id="confirmModalLabel">Confirm Answer</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center modal-body-custom">
          <p id="confirmText">Are you sure you want to submit this answer?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-accent" id="confirmYes">Yes</button>
          <button type="button" class="btn btn-secondary" id="confirmNo" data-bs-dismiss="modal">No</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Duplicate Modal -->
  <div class="modal fade" id="duplicateModal" tabindex="-1" aria-labelledby="duplicateModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content modal-content-custom">
        <div class="modal-header modal-header-custom">
          <h5 class="modal-title" id="duplicateModalLabel">
            <i class="bi bi-exclamation-triangle-fill text-warning me-2"></i>Duplicate Entry
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center modal-body-custom">
          <div class="warn-text mb-3">⚠ Duplicate Name Detected</div>
          <p id="duplicateText">A record with this name already exists. Please contact your instructor.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-accent" id="duplicateOk" data-bs-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Enhanced Error Modal (Dynamic Messages for Connection/Sheet/Questions Issues) -->
  <div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                  <h5 class="modal-title" id="errorModalLabel">Error</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                  <div id="errorText" class="alert alert-danger"></div>
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" id="errorOk" data-bs-dismiss="modal">OK</button>
              </div>
          </div>
      </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Global API endpoint for this deployment (set from new Apps Script deploy ID)
    // Placed before runtime script so `exam.js` can read it on load.
    window.ANSWER_API_URL = 'https://script.google.com/macros/s/AKfycbyq5gga_402JbgBtjexMuXN9x-muanN4ke1wC0kEZNB_-T5WCMfyx_lS5-qXl3RQkU/exec';
  </script>
  <script src="scripts/exam.js"></script>
</body>
</html>


